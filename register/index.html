<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registration Form</title>
        
        <link rel="icon" type="image/x-icon" href="assets/img/telfi_logo.png">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <link rel="stylesheet" href="assets/style.css">

    </head>

    <body>

        <div class="container">

            <div style="margin-left: 43px;">
                <img src="assets/img/at-broadband-logo.png"  width="275" id="lo">
                <h5 id="reg">Registration</h5>
                <hr>
            </div>
    
            

            <form action="../homefiber/backend/register_employee.php" method="POST" enctype="multipart/form-data" autocomplete="off">

                <div class="form first">

                    <div class="details personal">
                        <!--<p style="color:red"><b>Use this link for signature</b></p>-->
                        <!--<a href="https://onlinesignature.com/draw-a-signature-online">https://onlinesignature.com/draw-a-signature-online</a>-->
                        
                        <span class="title">Personal Details</span>

                        <div class="fields">


                            <div class="input-field">
                                <label id="required">Full Name</label>
                                <input type="text" placeholder="Enter your name" name="employee_name" required>
                            </div>

                            <div class="input-field">
                                <label id="required">Whatsapp Number</label>
                                <input type="number" placeholder="Enter mobile number" name="whatsapp_no" required>
                            </div>

                            <div class="input-field">
                                <label>Alternative Number<span id="optional">(optional)</span></label>
                                <input type="number" placeholder="Enter your Alternative Number" name="alternative_no" >
                            </div>

                            <div class="input-field">
                                <label id="required">Date of Birth</label>
                                <input type="date" placeholder="Enter birth date" name="date_of_birth" data-date="" data-date-format="YYYY-MM-DD" value="" required>
                            </div>
                            
                            

                            <div class="input-field">
                                <label id="required">Aadhar Number</label>
                                <input type="number" placeholder="Enter Aadhar number" name="aadhar_no" required>
                            </div>

                            <div class="input-field" style="height: 60px;">
                                    <label id="required">Aadhar Photo</label>
                                    <input type="file" class="form-control" id="form"   name="aadharimage" accept="image/png, image/jpeg"  required/>
                            </div>

                            <div class="input-field">
                                <label id="required">Address</label>
                                <textarea class="form-control" id="textarea" oninput="countWords()" name="employee_address" rows="3" required></textarea>
                                <div id="wordCount" style="font-size: 12px;" >0/512</div>
                            </div>

                            <div class="input-field">
                                <label >Alternative Address<span id="optional">(optional)</span></label>
                                <textarea class="form-control" id="textarea1" oninput="countWords1()" name="alternative_address" rows="3" ></textarea>
                                <div id="wordCount1" style="font-size: 12px;" >0/512</div>
                            </div>

                            <div class="input-field">
                                <label id="required">Educational Qualification</label>
                                <textarea class="form-control" id="textarea2" oninput="countWords2()" name="education" rows="3" required></textarea>
                                <div id="wordCount2" style="font-size: 12px;" >0/900</div>
                            </div>

                            <script>
                                function countWords() {
                                    var textarea = document.getElementById('textarea');
                                    var wordCount = document.getElementById('wordCount');

                                    // Remove leading and trailing whitespaces
                                    var text = textarea.value.trim();

                                    // Split the text into words
                                    var words = text.split(/\s+/);

                                    // Filter out empty words
                                    words = words.filter(function(word) {
                                        return word.length > 0;
                                    });

                                    // Display the word count
                                    wordCount.innerHTML = ''  + words.length +'/512';
                                }
                                function countWords1() {
                                    var textarea = document.getElementById('textarea1');
                                    var wordCount = document.getElementById('wordCount1');

                                    // Remove leading and trailing whitespaces
                                    var text = textarea.value.trim();

                                    // Split the text into words
                                    var words = text.split(/\s+/);

                                    // Filter out empty words
                                    words = words.filter(function(word) {
                                        return word.length > 0;
                                    });

                                    // Display the word count
                                    wordCount.innerHTML = ''  + words.length +'/512';
                                }
                                function countWords2() {
                                    var textarea = document.getElementById('textarea2');
                                    var wordCount = document.getElementById('wordCount2');

                                    // Remove leading and trailing whitespaces
                                    var text = textarea.value.trim();

                                    // Split the text into words
                                    var words = text.split(/\s+/);

                                    // Filter out empty words
                                    words = words.filter(function(word) {
                                        return word.length > 0;
                                    });

                                    // Display the word count
                                    wordCount.innerHTML = ''  + words.length +'/900';
                                }
                            </script>

                            <div class="input-field">
                                <label id="required">Email</label>
                                <input type="email" placeholder="Enter your email" name="email_id" id="email" required>
                            </div>

                            <div class="input-field">
                                <label id="required">Gender</label>
                                <select  class="gender" name="male_female"
                                    style="margin:0px;height:40px;border-radius: 5px;border: 1px solid #aaa;font-size:14px;color:#333;" required>
                                    <option value="1">Male</option>
                                    <option value="0">Female</option>
                                </select>
                            </div>

                            <div class="input-field" style="height: 60px;">
                                    <label id="required">Employee Photo</label>
                                    <input type="file" id="form" class="form-control"  name="image" id="form"   accept="image/png, image/jpeg"  required/>
                            </div>

                            <div class="input-field">
                                <label id="required">Blood Group</label>
                                <input type="text" placeholder="Enter Blood Group" name="blood_group" maxlength="4" required>
                            </div>
                            

                            <div class="input-field">
                                <label id="required">Marital Status</label>
                                <select  class="gender"  name="marital_status"
                                style="margin:0px;height:40px;border-radius: 5px;border: 1px solid #aaa;font-size:14px;color:#333;" required>
                                    <option value="Single">Single</option>
                                    <option value="Married">Married</option>
                                    <option value="Widowed">Widowed</option>
                                    <option value="Divorced">Divorced</option>
                                </select>
                            </div>
                        
                            <!-- <div class="input-field" style="height: 60px;">
                                    <label id="required">Signature</label>
                                    <input type="file" class="form-control" name="signatureimage" accept="image/png, image/jpeg"  required/>
                            </div> -->

                            <div class="input-field">
                                <label id="required">Username</label>
                                <input type="text" placeholder="Enter your User Name" name="username" id="username"  required>
                                <span id="availability"></span>
                            </div>

                            <div class="input-field">
                                <label id="required">Password</label>
                                <input type="text" placeholder="Enter your Password" name="employee_password" id="password"  required>
                            </div>

                            <div class="input-field">
                                <label id="required">ReEnter Password</label>
                                <input type="text" placeholder="ReEnter your Password" name="reenterpassword" id="repassword"  required>
                            </div>
                        
                        
                        </div>

                    </div>

                    <div class="details ID mt-4">

                        <div class="d-flex justify-content-center align-items-center">
                            <button  name="register_employee" style="background-color:red" id="submit" disabled>Register</button>
                        </div>

                    </div>

                </div>

                <script>  
                        $(document).ready(function(){  
                        $('#username').blur(function(){

                            var username = $(this).val();

                            $.ajax({
                            url:'../homefiber/form_check/check.php',
                            method:"POST",
                            data:{user_name:username},
                            success:function(data)
                            {
                            if(data != '0')
                            {
                                $('#availability').html('<span class="text-danger">Username Already Taken</span>');
                                $('#submit').attr("disabled", true);
                                $('#submit').css('background-color', 'red');
                            }
                            else
                            {
                                $('#availability').html('<span class="text-success">Username Available</span>');
                                $('#submit').attr("disabled", false);
                                $('#submit').css('background-color', 'green');
                                $("#submit").click(function () {
                                    var password = $("#password").val();
                                    var confirmPassword = $("#repassword").val();
                                    if (password != confirmPassword) {
                                        alert("Passwords do not match.");
                                        return false;
                                    }
                                return true;
                                });
                            }
                            }
                            })

                        });
                        });  
                </script>
                
            </form>

        
            <!--<div class="input-field ">-->

            <!--    <label class="d-flex justify-content-center align-items-center">Signature</label>-->
                    
            <!--    <div class="d-flex justify-content-center align-items-center">-->
            <!--        <canvas id="signature-pad" width="300" height="150" style="border:1px solid #000;"></canvas>-->
            <!--    </div>-->

            <!--    <br>-->

            <!--    <div class="d-flex justify-content-center align-items-center">-->
            <!--        <button onclick="convertToImage()" class="btn btn-primary mx-1">OK</button>-->
            <!--        <button onclick="clearSignature()" class="btn btn-primary">clear</button>-->
            <!--    </div>-->
                            
            <!--</div>-->

            <!--<div class="d-flex justify-content-center align-items-center">-->
            <!--    <a id="download-link" style="display: none;">Download Image</a>-->
            <!--</div>-->

            <!--<div class="d-flex justify-content-center align-items-center">-->
            <!--    <img id="signature-image" alt="Signature Image">-->
            <!--</div>-->
                            

        </div>
        
        <!-- </div>
        <div>

        <div> -->


        <script>
            var canvas = document.getElementById('signature-pad');
            var ctx = canvas.getContext('2d');
            var drawing = false;

            canvas.addEventListener('mousedown', function (e) {
                drawing = true;
                ctx.beginPath();
                ctx.moveTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            });

            canvas.addEventListener('mousemove', function (e) {
                if (!drawing) return;
                ctx.lineTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
                ctx.stroke();
            });

            canvas.addEventListener('mouseup', function () {
                drawing = false;
            });

            function convertToImage() {
                html2canvas(canvas).then(function (canvasImage) {
                var imgData = canvasImage.toDataURL('image/jpeg');
                document.getElementById('signature-image').src = imgData;

                // Display download link
                var downloadLink = document.getElementById('download-link');
                downloadLink.href = imgData;
                downloadLink.download = 'signature_image.jpg';
                downloadLink.style.display = 'block';
                });
            }

            function clearSignature() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                document.getElementById('signature-image').src = ''; // Clear the signature image
                document.getElementById('download-link').style.display = 'none'; // Hide the download link
            }
        </script>
        <!-- <script src="assets/script.js"></script> -->

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    </body>

</html>
